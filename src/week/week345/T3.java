package week.week345;

import java.util.Arrays;

public class T3 {
    int n;
    int m;
    int[][] grid;
    int[][] dp;
    public int maxMoves(int[][] grid) {
        int ans = 0;
        n = grid.length;
        m = grid[0].length;
        dp = new int[n][m];
        for (int i = 0; i < n; i++) {
            Arrays.fill(dp[i], -1);
        }
        this.grid = grid;
        for (int i = 0; i < n; i++) {
            ans = Math.max(ans, dfs(i, 0));
        }
        return ans;
    }

    private int dfs(int row, int col) {
        int res = 0;
        if (col == m - 1) {
            dp[row][col] = 0;
            return 0;
        };
        if (dp[row][col] != -1) {
            return dp[row][col];
        }
        for (int k = row - 1;k <= row + 1; k++) {
            if (k >= 0 && k < n && grid[k][col + 1] > grid[row][col]) {
                res = Math.max(res, dfs(k, col + 1) + 1);
            }
        }
        dp[row][col] = res;
        return res;
    }
}
// 1 - 49
//3
class Test3 {
    public static void main(String[] args) {
        T3 test = new T3();
        test.maxMoves(new int[][]{
                {2,4,3,5},{5,4,9,3},{3,4,2,11},{10,9,13,15}
        });
//        test.maxMoves(new int[][]{
//                {1000000,92910,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068},
//                {1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118}
//        });
//        test.maxMoves(new int[][]{
//                [[65,200,263,220,91,183,2,187,175,61,225,120,39],
//                [111,242,294,31,241,90,145,25,262,214,145,71,294],
//                [152,25,240,69,279,238,222,9,137,277,8,143,143],
//                [189,31,86,250,20,63,188,209,75,22,127,272,110],
//                [122,94,298,25,90,169,68,3,208,274,202,135,275],
//                [205,20,171,90,70,272,280,138,142,151,80,122,130],
//                [284,272,271,269,265,134,185,243,247,50,283,20,232],
//                [266,236,265,234,249,62,98,130,122,226,285,168,204],
//                [231,24,256,101,142,28,268,82,111,63,115,13,144],
//                [277,277,31,144,49,132,28,138,133,29,286,45,93],
//                [163,96,25,9,3,159,148,59,25,81,233,127,12],
//                [127,38,31,209,300,256,15,43,74,64,73,141,200]]
//        })
    }
}
